#include <SPI.h>
#include <SD.h>

int secondes = 0;
int minutes = 0;

File meteo;

void setup() {
  Serial.begin(9600);
  Serial.println("Initialisation de la carte SD...");
  
  if (!SD.begin(4)){
    Serial.println("L'initialisation de la carte SD a échoué");
    return;
  }
  Serial.println("L'initialisation de la carte SD s'est correctement déroulée!");
  SD.remove("meteo.txt");

  meteo = SD.open("meteo.txt", FILE_WRITE);

  if (meteo){
    Serial.println("Écriture dans la carte...");
    meteo.println("test");
    Serial.println("Opération réussi avec succès!");

    meteo.close();
  } else {
    Serial.println("Erreur lors de l'ouverture de meteo.txt");
  }

  meteo = SD.open("meteo.txt");

  if (meteo){
    Serial.println("Lecture de la carte");
    while (meteo.available()){
      Serial.write(meteo.read());
    }
    
    Serial.println("Opération réussi avec succès!");

    meteo.close();
  } else {
    Serial.println("Erreur lors de l'ouverture de meteo.txt");
  }

}

void loop() {
  delay(1000);
  secondes++;

  if (secondes == 60){
    secondes = 0;
    minutes++
   }
}
